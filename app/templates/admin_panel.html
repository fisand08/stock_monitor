{% extends "base.html" %}
{% block content %}
    <div class="section">
        <h2>Admin Panel</h2>
        <br>
        <hr>
        <h3>Manage users</h3>
        {% for user in users %}
            <div>{{ user.username }}</div>
            <div>{{ user.email }}</div>
            <div>{{ "Admin" if user.is_admin else "Regular User" }}</div>
            <form action="{{ url_for('edit_user', user_id=user.id) }}" method="post">
                <button type="submit">Edit</button>
                <button formaction="{{ url_for('delete_user', user_id=user.id) }}" type="submit">Delete</button>
                <label for="is_admin">Admin Privileges:</label>
                <input type="checkbox" id="is_admin" name="is_admin" {% if user.is_admin %}checked{% endif %}>
            </form>
            <br>
        {% endfor %}
    </div>
    <div class="section">
        <h3>Clear Table</h3>
        <form action="/admin/clear_table/stocks" method="post">
            <button type="submit">Clear Stocks</button>
        </form>
        <form action="/admin/clear_table/stock_prices" method="post">
            <button type="submit">Clear Stock Prices</button>
        </form>
        <form action="/admin/clear_table/portfolio_stocks" method="post">
            <button type="submit">Clear Portfolio Stocks</button>
        </form>
        <form action="/admin/clear_table/portfolios" method="post">
            <button type="submit">Clear Portfolios</button>
        </form>
    </div>
{% endblock %}
